<?xml version="1.0" encoding="utf-8"?>
<Workspace version="26" milversion="1060" DefaultSystem="3" MilLiteCompatible="false" ReadOnly="true" Description="This workspace shows how to create a user-defined function in MIL CoPilot.">
  <MOperationsManager>
    <MOperationSingle UniqueIdentifier="12" Type="InternalAlloc" ManagedObject="1">
      <MFunctionCall FunctionName="MappAlloc">
        <MFunctionCallParam ParamType="IntPtr" Define="M_NULL" />
        <MFunctionCallParam ParamType="Int64" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="IMObjectReference" IMObject="1" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSingle UniqueIdentifier="2" Type="InternalAlloc" ManagedObject="3" EditionRibbon="None">
      <MFunctionCall FunctionName="MsysAlloc">
        <MFunctionCallParam ParamType="IMObject" IMObject="1" />
        <MFunctionCallParam ParamType="String" String="M_SYSTEM_HOST" MString="$I{IMILMAINSYSTEM}" />
        <MFunctionCallParam ParamType="MIL_INT" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="Int64" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="IMObjectReference" IMObject="3" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSingle UniqueIdentifier="46" Type="AutoGeneratedAlloc" ManagedObject="33">
      <MFunctionCall FunctionName="MdispAlloc">
        <MFunctionCallParam ParamType="IMObject" IMObject="3" />
        <MFunctionCallParam ParamType="MIL_INT" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="String" String="M_DEFAULT" />
        <MFunctionCallParam ParamType="Int64" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="IMObjectReference" IMObject="33" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationMultiple UniqueIdentifier="50" Type="ControlBlock" ManagedObject="33" EditionRibbon="None" NbFunctions="1">
      <MFunctionCall FunctionName="MdispControl">
        <MFunctionCallParam ParamType="IMObject" IMObject="33" />
        <MFunctionCallParam ParamType="Int64" Define="M_TITLE" />
        <MFunctionCallParam ParamType="String" String="Display" />
      </MFunctionCall>
    </MOperationMultiple>
    <MOperationSingle UniqueIdentifier="8" Type="AutoGeneratedRestore" DisplayOperation="52" ManagedObject="5" FunctionEditor="true">
      <MFunctionCall FunctionName="MbufImport">
        <MFunctionCallParam ParamType="Filename" MFilename="$I{MILIMAGESDIR}\MpatFindMultipleModels\Buttons.mim" />
        <MFunctionCallParam ParamType="Int64" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="Int64" Define="M_RESTORE+M_NO_GRAB+M_NO_COMPRESS" ReadOnly="true" />
        <MFunctionCallParam ParamType="IMObject" IMObject="3" />
        <MFunctionCallParam ParamType="IMObjectReference" IMObject="5" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationAssociatedSelect Display="33" OwnerOperation="8" UniqueIdentifier="52" Type="AutoGeneratedFunction" EditionRibbon="None">
      <MFunctionCall FunctionName="MdispSelect">
        <MFunctionCallParam ParamType="IMObject" IMObject="33" />
        <MFunctionCallParam ParamType="IMObject" IMObject="5" />
      </MFunctionCall>
    </MOperationAssociatedSelect>
    <MOperationSingle UniqueIdentifier="18" Type="AutoGeneratedRestore" ManagedObject="11" FunctionEditor="true">
      <MFunctionCall FunctionName="MpatRestore">
        <MFunctionCallParam ParamType="Filename" MFilename="$I{WORKSPACEDIR}\FindMultiple.mpat" />
        <MFunctionCallParam ParamType="IMObject" IMObject="3" />
        <MFunctionCallParam ParamType="Int64" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="IMObjectReference" IMObject="11" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSingle UniqueIdentifier="58" Type="UserOperation">
      <MFunctionCall FunctionName="MpatPreprocess">
        <MFunctionCallParam ParamType="IMObject" IMObject="11" />
        <MFunctionCallParam ParamType="Int64" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="IMObject" MPseudoObjectType="M_IMAGE" MPseudoObjectId="M_NULL" />
      </MFunctionCall>
    </MOperationSingle>
    <UserDefinedOperation UniqueIdentifier="28" Type="UserOperation" EditionRibbon="UserFunctionEditor" EntryPointForContext="2">
      <UserDefinedParameter ObjectParam="5" />
      <UserDefinedParameter ObjectParam="11" />
      <UserDefinedParameter OutVariableParam="Number" />
    </UserDefinedOperation>
    <MOperationPrint UniqueIdentifier="42" Type="UserOperation" EditionRibbon="PrintOperation" PreText="Found " PostText=" occurences" Variable="Number" />
    <MInsertionBar UniqueIdentifier="6" Type="InsertionBar" EditionRibbon="None" />
    <MOperationSingle UniqueIdentifier="20" Type="AutoGeneratedFree" ManagedObject="11">
      <MFunctionCall FunctionName="MpatFree">
        <MFunctionCallParam ParamType="IMObject" IMObject="11" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSingle UniqueIdentifier="10" Type="AutoGeneratedFree" ManagedObject="5">
      <MFunctionCall FunctionName="MbufFree">
        <MFunctionCallParam ParamType="IMObject" IMObject="5" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSingle UniqueIdentifier="48" Type="AutoGeneratedFree" ManagedObject="33">
      <MFunctionCall FunctionName="MdispFree">
        <MFunctionCallParam ParamType="IMObject" IMObject="33" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSingle UniqueIdentifier="4" Type="InternalFree" ManagedObject="3">
      <MFunctionCall FunctionName="MsysFree">
        <MFunctionCallParam ParamType="IMObject" IMObject="3" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSingle UniqueIdentifier="14" Type="InternalFree" ManagedObject="1">
      <MFunctionCall FunctionName="MappFree">
        <MFunctionCallParam ParamType="IMObject" IMObject="1" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationUDFHeader IsHeader="true" UniqueIdentifier="22" Type="AutoGeneratedFunction" FunctionContext="2" EditionRibbon="None" />
    <MOperationUDFParamHandler NbParameters="3" SystemForContext="19" SystemIsActualParam="false" UniqueIdentifier="24" Type="AutoGeneratedFunction" FunctionContext="2" EditionRibbon="None">
      <UDFHandlerParameter Variable="TargetImage" VariableType="MIL_ID" ObjectForParameter="15" />
      <UDFHandlerParameter Variable="PatContext" VariableType="MIL_ID" ObjectForParameter="17" />
      <UDFHandlerParameter OutParam="true" />
      <MFunctionCall FunctionName="MobjInquire">
        <MFunctionCallParam ParamType="IMObject" ReadOnly="true" IMObject="15" />
        <MFunctionCallParam ParamType="Int64" Define="M_OWNER_SYSTEM" ReadOnly="true" />
        <MFunctionCallParam ParamType="MIL_IDReference" Name="MilSystem0" AssociatedProxyObject="19" CanBeAutomaticVariable="true" />
      </MFunctionCall>
    </MOperationUDFParamHandler>
    <MOperationSingle UniqueIdentifier="34" Type="AutoGeneratedAlloc" FunctionContext="2" ManagedObject="25">
      <MFunctionCall FunctionName="MpatAllocResult">
        <MFunctionCallParam ParamType="IMObject" IMObject="19" />
        <MFunctionCallParam ParamType="Int64" Define="M_DEFAULT" />
        <MFunctionCallParam ParamType="IMObjectReference" IMObject="25" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSortedMultiple UniqueIdentifier="32" Type="UserOperation" FunctionContext="2" CustomName="MpatFind" EditionRibbon="PatFind" NbFunctions="1" MainFunctionOffset="0">
      <MFunctionCall FunctionName="MpatFind" BlockUniqueTag="PatFindUniqueKey">
        <MFunctionCallParam ParamType="IMObject" IMObject="17" />
        <MFunctionCallParam ParamType="IMObject" IMObject="15" />
        <MFunctionCallParam ParamType="IMObject" ReadOnly="true" IMObject="25" />
      </MFunctionCall>
    </MOperationSortedMultiple>
    <MOperationSingle UniqueIdentifier="40" Type="UserOperation" FunctionContext="2">
      <MFunctionCall FunctionName="MpatGetResult">
        <MFunctionCallParam ParamType="IMObject" IMObject="25" />
        <MFunctionCallParam ParamType="MIL_INT" Define="M_GENERAL" />
        <MFunctionCallParam ParamType="Int64" Define="M_NUMBER+M_TYPE_MIL_INT" />
        <MFunctionCallParam ParamType="MIL_INTReference" Name="NbOccurrences" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationSingle UniqueIdentifier="36" Type="AutoGeneratedFree" FunctionContext="2" ManagedObject="25">
      <MFunctionCall FunctionName="MpatFree">
        <MFunctionCallParam ParamType="IMObject" IMObject="25" />
      </MFunctionCall>
    </MOperationSingle>
    <MOperationUDFHeader IsHeader="false" UniqueIdentifier="26" Type="AutoGeneratedFunction" FunctionContext="2" EditionRibbon="UserFunctionOutputParameterEditor" />
  </MOperationsManager>
  <MObjectsManager>
    <MApplication UniqueIdentifier="1" IsReadOnly="true" AllocOperation="12" FreeOperation="14" Name="MilApplication" Type="M_APPLICATION" OwnerSystem="0" />
    <MSystem UniqueIdentifier="3" IsReadOnly="true" AllocOperation="2" FreeOperation="4" Name="MilSystem" Type="M_SYSTEM" OwnerSystem="3" />
    <SingleFrame UniqueIdentifier="5" AllocOperation="8" FreeOperation="10" Name="ColorChartBayerRaw" Type="M_IMAGE" OwnerSystem="3" />
    <HyperObject UniqueIdentifier="11" AllocOperation="18" FreeOperation="20" Name="Pat Context" Type="M_PAT_CONTEXT" OwnerSystem="3" />
    <SingleFrame UniqueIdentifier="15" InnerVariable="TargetImage" Name="TargetImage" Type="M_IMAGE" OwnerSystem="3" />
    <HyperObject UniqueIdentifier="17" InnerVariable="PatContext" Name="PatContext" Type="M_PAT_CONTEXT" OwnerSystem="3" />
    <MSystem UniqueIdentifier="19" IsReadOnly="true" InnerVariable="MilSystem0" Name="MilSystem0" Type="M_SYSTEM" OwnerSystem="19" />
    <ResultObject UniqueIdentifier="25" AllocOperation="34" FreeOperation="36" Name="Pat Result" Type="M_PAT_RESULT" OwnerSystem="3" ParentObject="17" />
    <Display UniqueIdentifier="33" AllocOperation="46" FreeOperation="48" Name="Display" Type="M_DISPLAY" OwnerSystem="3" ControlBlock="50" />
  </MObjectsManager>
  <MFunctionContextManager>
    <MFunctionContext UniqueIdentifier="2" Type="UserDefined">
      <UserFunctionPrototype FunctionName="OccurenceCounter" UniqueIdentifier="1" AssociatedFunctionContext="2">
        <UserFunctionPrototypeParameter ParamIndex="0" ParamName="TargetImage" ParamType="MIL_ID" ObjectType="M_IMAGE" ParamID="1" />
        <UserFunctionPrototypeParameter ParamIndex="1" ParamName="PatContext" ParamType="MIL_ID" ObjectType="M_PAT_CONTEXT" ParamID="2" />
        <UserFunctionPrototypeParameter ParamIndex="2" ParamName="Number" ParamType="MIL_INT" ParamDirection="Out" AssignedFrom="NbOccurrences" ParamID="3" />
      </UserFunctionPrototype>
    </MFunctionContext>
  </MFunctionContextManager>
</Workspace>